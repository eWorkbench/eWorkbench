<!--
  Copyright (C) 2016-2020 TU Muenchen and contributors of ANEXIA Internetdienstleistungs GmbH
  SPDX-License-Identifier: AGPL-3.0-or-later
-->

<ng-container *transloco="let t">
  <eworkbench-loading [loading]="loading">
    <div class="comment-container">
      <img
        *ngIf="currentUser?.userprofile.avatar"
        [src]="currentUser?.userprofile.avatar"
        class="avatar img-fluid rounded-circle"
        [alt]="t('profile.picture')"
      />
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <input
          type="text"
          class="form-control ewb-input"
          formControlName="subject"
          id="subject-modal"
          name="subject-modal"
          [placeholder]="t('link.newComment.subject.placeholder')"
        />
        <eworkbench-wysiwyg-editor class="mt-1" formControlName="content"></eworkbench-wysiwyg-editor>
        <div class="custom-control custom-checkbox d-inline-block mt-2">
          <input
            class="custom-control-input"
            type="checkbox"
            formControlName="private"
            [id]="'private' + uniqueHash"
            [name]="'private' + uniqueHash"
          />
          <label class="custom-control-label font-weight-normal" [for]="'private' + uniqueHash">{{
            t('link.newComment.private.label')
          }}</label>
        </div>
        <button type="submit" class="btn ewb-button-big ewb-button-primary mt-1 float-right" [disabled]="loading || form.invalid">
          {{ t('link.newComment.create') }}
        </button>
      </form>
    </div>
  </eworkbench-loading>
</ng-container>
