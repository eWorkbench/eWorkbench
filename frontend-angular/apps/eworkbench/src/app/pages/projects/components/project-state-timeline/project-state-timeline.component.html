<!--
  Copyright (C) 2016-2020 TU Muenchen and contributors of ANEXIA Internetdienstleistungs GmbH
  SPDX-License-Identifier: AGPL-3.0-or-later
-->

<ng-container *transloco="let t">
  <eworkbench-loading [loading]="loading">
    <tabset #stateTimelineTabs class="ewb-tabs">
      <tab [heading]="t('project.stateTimeline.tabHeading.states')">
        <eworkbench-tree-view #statesTreeView [columns]="statesListColumns" [data]="treeData" class="mt-2"></eworkbench-tree-view>
      </tab>
      <tab [heading]="t('project.stateTimeline.tabHeading.timeline')" #timelineTab="tab">
        <eworkbench-gantt-chart
          *ngIf="timelineTab.active"
          [items]="ganttItems"
          [refresh]="renderGantt"
          class="pt-1"
        ></eworkbench-gantt-chart>
      </tab>
    </tabset>
  </eworkbench-loading>
</ng-container>

<ng-template #nameCellTemplate let-row>
  <div class="inline-flex" ellipsis="300" [tooltip]="row.name" containerClass="tooltip-sm" [delay]="500">
    <a [routerLink]="['/projects', row.pk]">{{ row.name }}</a>
  </div>
</ng-template>
<ng-template #progressCellTemplate let-row>
  <ng-container *transloco="let t">
    <eworkbench-project-state [state]="row.project_state" [label]="false" class="float-left mr-2"></eworkbench-project-state>
    <eworkbench-project-progress-bar [project]="row"></eworkbench-project-progress-bar>
  </ng-container>
</ng-template>
