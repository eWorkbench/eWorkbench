/**
 * Copyright (C) 2016-2020 TU Muenchen and contributors of ANEXIA Internetdienstleistungs GmbH
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */

@import 'styles/colors';
@import 'styles/variables';
@import '~@ng-select/ng-select/themes/default.theme.css';

@mixin ewb-button($height, $padding, $font-size) {
  margin: 0;
  padding: 0;
  border-radius: 0;

  height: $height;
  padding: $padding;
  line-height: unset;
  font-size: $font-size;
  font-weight: 600;

  &:disabled {
    pointer-events: none;
    opacity: 0.5;
  }
}

label {
  margin-bottom: 3.5px;
}

.ewb-required {
  font-size: $font-size-sm;
  color: $text-color;
  opacity: 0.7;
}

.ewb-button {
  &-big {
    @include ewb-button(30px, 0 10.5px, $font-size-sm);
  }

  &-regular {
    @include ewb-button(25px, 0 10px, $font-size-sm);
  }

  &-small {
    @include ewb-button(16px, 0, 10px);

    width: 16px;
  }

  &-primary {
    color: #ffffff;
    background-color: $primary-color;

    &.ewb-button-regular {
      color: $primary-color;
      background-color: unset;
      border-color: $primary-color;
    }

    &:hover,
    &.active {
      color: #ffffff;
      background-color: $primary-color;
    }
  }

  &-secondary {
    color: $primary-color;
    background-color: $secondary-color;

    &:hover {
      color: $primary-color;
      background-color: $secondary-color-hover;
    }
  }

  &-additional {
    color: #ffffff;
    background-color: $additional-color;

    &:hover {
      color: #ffffff;
      background-color: $additional-color-hover;
    }
  }

  &-background {
    color: $primary-color;
    background-color: #ffffff;

    &.ewb-button-secondary {
      color: #ffffff;
      background-color: unset;
      border-color: #ffffff;

      &:hover {
        color: $primary-color;
        background-color: #ffffff;
      }
    }

    &:hover {
      color: $primary-color;
      background-color: $focus-color;
    }
  }

  &-icon {
    color: #595959;
    background-color: transparent;

    &:hover {
      color: $primary-color;
    }
  }
}

a.ewb-button-regular {
  padding: 2px 10px;
}

@mixin ewb-input($label: false) {
  color: $text-color;
  background-color: #ffffff;
  border-color: $border-color;
  border-radius: 0;
  height: 34px;
  font-size: $font-size-sm;
  padding: 6px 10px;
  background-clip: border-box;

  &:placeholder-shown {
    background-color: $secondary-color;

    &:read-only {
      background-color: $secondary-color;
    }
  }

  &:read-only {
    @if $label {
      background-color: $secondary-color;
    } @else {
      background-color: #ffffff;
    }
  }

  &:focus {
    border-color: transparent;
    background-color: $focus-color;
  }

  &:disabled {
    border-color: transparent;
    background-color: transparent;
  }

  &.ng-invalid.ng-touched {
    border-width: 1.5px;
    border-color: $invalid-border-color;
    background-color: #fff0ee;
  }
}

.ewb-input {
  @include ewb-input();
}

.ewb-input-file {
  @include ewb-input($label: true);
}

.ewb-file-button {
  width: 0.1px;
  height: 0.1px;
  opacity: 0;
  overflow: hidden;
  position: absolute;
  z-index: -1;

  & + label {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  &:focus {
    & + label {
      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
    }
  }

  &:disabled {
    & + label {
      pointer-events: none;
      opacity: 0.5;
    }
  }
}

.custom-checkbox {
  &.custom-control {
    display: flex;
    align-items: center;
  }

  .custom-control-label {
    &::before {
      border-radius: 3px;
      top: 0.1rem;
    }

    &::after {
      top: 0.1rem;
    }
  }
}

.custom-control-label::before {
  border-color: #6b6b6b;

  &.ng-invalid.ng-touched {
    border-color: $invalid-border-color;
    background-color: #fff0ee;
  }
}

.custom-control-input:checked ~ .custom-control-label::before {
  background-color: $primary-color;
  border-color: transparent;
}

.custom-control-input:not(:disabled):active ~ .custom-control-label::before {
  background-color: $primary-color;
  border-color: transparent;
}

.custom-file-label {
  &::after {
    color: #ffffff;
    background-color: $additional-color-hover;
    border-radius: 0;
    height: unset;
  }
}

.custom-file-label-filled {
  &.ewb-input-file {
    &:read-only {
      background-color: #ffffff;
    }
  }
}

.ewb-textarea {
  color: $text-color;
  background-color: #ffffff;
  border-color: $border-color;
  border-radius: 0;
  font-size: $font-size-sm;
  padding: 6px 10px;
  background-clip: border-box;

  &:placeholder-shown {
    background-color: $secondary-color;
  }

  &:focus {
    border-color: transparent;
    background-color: $focus-color;
  }

  &:disabled {
    border-color: transparent;
    background-color: transparent;
  }

  &.ng-invalid.ng-touched {
    border-width: 1.5px;
    border-color: $invalid-border-color;
    background-color: #fff0ee;
  }
}

.pagination.ewb-pagination {
  justify-content: center;
  border-radius: 0;

  .page-item {
    margin-right: 5px;

    .page-link {
      color: $primary-color;
    }

    &.disabled {
      .page-link {
        color: unset;
      }
    }

    &.active {
      .page-link {
        color: unset;
        background-color: unset;
        border-color: unset;
        pointer-events: none;
      }
    }

    &:first-child {
      margin: 0;
    }

    &:first-child,
    &:last-child {
      .page-link {
        border-radius: 0;
      }
    }
  }

  .page-link {
    @include ewb-button(25px, 0 10px, 14px);

    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
    border: 0;
    font-weight: unset;
    height: 25px;
    width: 25px;
    padding: 0;
  }
}

.ng-select.ewb-select {
  .ng-select-container {
    border-radius: 0;
    min-height: 34px;
    border-color: $border-color;
    background-color: #ffffff;

    &:hover {
      box-shadow: none;
    }

    .ng-value-container {
      display: grid;
      grid-template: 1fr / 1fr;
      padding: 0;
      padding-left: 10px;

      .ng-value {
        font-size: $font-size-sm;
      }

      .ng-input {
        padding-left: 0;

        > input {
          color: $text-color;
          font-size: $font-size-sm;
        }
      }

      .ng-placeholder {
        color: $text-color;
        font-size: $font-size-sm;
        opacity: 0.7;
      }
    }
  }

  &.ng-select-single {
    .ng-select-container {
      height: 34px;

      .ng-value-container {
        .ng-input {
          position: unset;
        }
      }

      * {
        grid-column: 1 / 1;
        grid-row: 1 / 1;
      }
    }
  }

  &.ng-select-multiple {
    .ng-select-container {
      .ng-value-container {
        display: flex;
        padding-top: 4px;
        padding-left: 10px;

        .ng-placeholder {
          top: unset;
          padding-left: 0px;
        }

        .ng-input {
          margin-bottom: 5px;
          padding: 0;
        }

        .ng-value {
          display: flex;
          background-color: $secondary-color;
          border-radius: 13px;
          padding-left: 10px;
          padding-right: 10px;
          border: 1px $border-color solid;

          &:hover {
            background-color: $secondary-color-hover;
          }

          .ng-value-label {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
          }

          .ng-value-icon {
            &.left {
              border: 0;
            }

            &:hover {
              font-weight: 700;
              background-color: transparent;
            }
          }
        }
      }
    }
  }

  &.ng-select-opened {
    > .ng-select-container {
      background-color: $focus-color;
      box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);

      .ng-arrow {
        display: none;
      }

      span.ng-arrow-wrapper {
        &:before {
          content: '\e943';
          display: inline-block;
          font: normal normal normal 14px/1 'wb-font';
          font-size: inherit;
          text-rendering: auto;
        }
      }
    }
  }

  &.ng-select-focused {
    &:not(.ng-select-opened) {
      > .ng-select-container {
        background-color: $focus-color;
        border-color: $border-color;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
      }
    }
  }

  .ng-clear-wrapper {
    color: #595959;
    bottom: -1px;

    &:hover {
      .ng-clear {
        color: #595959;
      }
    }
  }

  .ng-arrow-wrapper {
    .ng-arrow {
      display: none;
    }
  }

  span.ng-arrow-wrapper {
    &:before {
      content: '\e942';
      display: inline-block;
      font: normal normal normal 14px/1 'wb-font';
      font-size: inherit;
      text-rendering: auto;
    }
  }

  .ng-dropdown-panel {
    border-color: $border-color;
    background-color: #ffffff;
    width: auto !important;
    min-width: 100% !important;

    &.ng-select-bottom,
    &.ng-select-top {
      border-radius: 0;
      margin: 0;

      .ng-dropdown-panel-items {
        .ng-option {
          color: $text-color;
          font-size: $font-size-sm;
          padding: 6px 10px;

          .highlighted {
            font-weight: unset;
            text-decoration: unset;
            background-color: $focus-color;
          }

          &.ng-option-selected {
            background-color: transparent;
          }

          &.ng-option-marked {
            background-color: $secondary-color-hover;
          }

          &:last-child {
            border-radius: 0;
          }

          &.ng-option-disabled {
            background-color: #ffffff;
            opacity: 0.5;
          }
        }
      }
    }
  }
}

ng-select.ng-invalid.ng-touched .ng-select-container {
  border-width: 1.5px;
  border-color: $invalid-border-color;
  background-color: #fff0ee;
}

dp-date-picker {
  display: unset !important;
}

.dp-main {
  min-width: 267px;

  .dp-day-calendar-container {
    min-width: 267px;
  }

  &.dp-popup {
    box-shadow: none;
    border: 0;
    background-color: #ffffff;
  }

  .dp-calendar-nav {
    &-left,
    &-right {
      line-height: unset;
      background: transparent;
      color: #ffffff;
      border: 0;
      width: 30px;
      height: 30px;

      &:hover {
        background-color: rgba(0, 0, 0, 0.1);
      }
    }

    &-left {
      &::before {
        bottom: 1px;
        left: 2px;
      }
    }

    &-right {
      &::before {
        bottom: 1px;
        right: 2px;
      }
    }
  }

  .dp-current-location-btn {
    border: 0;
    border-radius: 0;
    box-shadow: none;
    background: transparent;
    width: 50px;
    height: 30px;
    font-size: $font-size-sm;

    &::before {
      content: 'Today';
      color: #ffffff;
    }

    &:hover {
      background-color: rgba(0, 0, 0, 0.1);
    }
  }

  .dp-calendar-nav-container {
    border: 1px solid $border-color;
    border-bottom: 0;
    background-color: $primary-color;
    height: 50px;
    padding: 10px;

    .dp-nav-header {
      left: 15px;
      font-size: unset;

      .dp-nav-header-btn {
        background: transparent;
        border: 0;
        color: #ffffff;
        height: 30px;

        &:hover {
          background-color: rgba(0, 0, 0, 0.1);
        }
      }
    }

    .dp-nav-btns-container {
      right: 10px;
    }
  }

  .dp-calendar-wrapper {
    border: 1px solid $border-color;
    padding: 10px;

    .dp-weekdays {
      display: flex;
      justify-content: space-between;
    }

    .dp-calendar-weekday {
      border: 0;
      font-size: $font-size-sm;
      color: #9aaec1;
    }

    .dp-calendar-day {
      border: 0;
      background: transparent;
      font-size: $font-size-sm;
      color: #54708b;
      width: 35px;
      height: 35px;

      &:hover {
        background-color: rgba(0, 0, 0, 0.1);
      }
    }

    .dp-current-day {
      border: 1px solid $primary-color;
    }

    .dp-months-row {
      display: flex;
      justify-content: space-around;
    }

    .dp-calendar-month {
      border: 0;
      background: transparent;
      font-size: 15px;
      color: #54708b;
      width: 100%;
      height: 35px;

      &.dp-current-month {
        border: 1px solid $primary-color;
      }

      &:hover {
        background-color: rgba(0, 0, 0, 0.1);
      }
    }
  }

  dp-time-select {
    border: 1px solid $border-color;
    border-top: 0;

    .dp-time-select {
      &-display-hours,
      &-display-minutes,
      &-separator {
        font-size: $font-size;
      }
    }

    .dp-time-select-control {
      &-up,
      &-down {
        line-height: unset;
        background: transparent;
        color: $primary-color;
        border: 0;
      }

      &-up {
        &::before {
          top: unset;
        }
      }

      &-bottom {
        &::before {
          bottom: unset;
        }
      }
    }
  }
}
